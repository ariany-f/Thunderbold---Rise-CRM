function delayAction(e,o){var n=0;return function(){var a=this,t=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(a,t)},o||0)}}function selectLastlySelectedTab(a){a=a||"",$(a+" [data-bs-toggle='ajax-tab']").each(function(){var a=$(this).attr("id"),a=getCookie("user_"+AppHelper.userId+"_"+a),t=$(this).find("[data-bs-target='"+a+"']");a&&t.attr("data-bs-target")?setTimeout(function(){t.trigger("click")},50):$(this).find("a").first().trigger("click")})}$(document).ready(function(){$.ajaxSetup({cache:!1}),moment.locale(AppLanugage.locale),jQuery.fn.datepicker.dates.custom={days:AppLanugage.days,daysShort:AppLanugage.daysShort,daysMin:AppLanugage.daysMin,months:AppLanugage.months,monthsShort:AppLanugage.monthsShort,today:AppLanugage.today},$("body").on("click","[data-act=ajax-modal]",function(){var t={ajaxModal:1},a=$(this).attr("data-action-url"),e=$(this).attr("data-modal-lg"),o=$(this).attr("data-modal-fullscreen"),n=$(this).attr("data-modal-close"),r=$(this).attr("data-title");return a?(r?$("#ajaxModalTitle").html(r):$("#ajaxModalTitle").html($("#ajaxModalTitle").attr("data-title")),$(this).attr("data-post-hide-header")?($("#ajaxModal .modal-header").addClass("hide"),$("#ajaxModal .modal-footer").addClass("hide")):($("#ajaxModal .modal-header").removeClass("hide"),$("#ajaxModal .modal-footer").removeClass("hide")),$("#ajaxModalContent").html($("#ajaxModalOriginalContent").html()),$("#ajaxModalContent").find(".original-modal-body").removeClass("original-modal-body").addClass("modal-body"),$("#ajaxModal").modal("show"),$("#ajaxModal").find(".modal-dialog").removeClass("custom-modal-lg"),$("#ajaxModal").find(".modal-dialog").removeClass("modal-fullscreen"),$("#ajaxModal").removeClass("global-search-modal"),$(this).each(function(){$.each(this.attributes,function(){var a;this.specified&&this.name.match("^data-post-")&&(a=this.name.replace("data-post-",""),t[a]=this.value)})}),ajaxModalXhr=$.ajax({url:a,data:t,cache:!1,type:"POST",success:function(a){$("#ajaxModal").find(".modal-dialog").removeClass("mini-modal"),"1"===e?$("#ajaxModal").find(".modal-dialog").addClass("custom-modal-lg"):"1"===o&&$("#ajaxModal").find(".modal-dialog").addClass("modal-fullscreen"),"1"===n&&$("#ajaxModal").addClass("global-search-modal"),$("#ajaxModalContent").html(a),setSummernoteToAll(!0),setModalScrollbar(),feather.replace()},statusCode:{403:function(){console.log("403: Session expired."),location.reload()},404:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("404: Page not found.",{container:".modal-body",animate:!1})}},error:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:!1})}})):console.log("Ajax Modal: Set data-action-url!"),!1}),$("#ajaxModal").on("hidden.bs.modal",function(a){ajaxModalXhr.abort(),$("#ajaxModal").find(".modal-dialog").removeClass("modal-lg"),$("#ajaxModal").find(".modal-dialog").addClass("modal-lg"),$("#ajaxModalContent").html("")}),$("body").on("click show.bs.dropdown","[data-act=ajax-request]",function(){var t={},e=$(this),a=e.attr("data-action-url"),o=e.attr("data-remove-on-success"),n=e.attr("data-remove-on-click"),r=e.attr("data-fade-out-on-success"),i=e.attr("data-fade-out-on-click"),s=e.attr("data-inline-loader"),l=e.attr("data-reload-on-success"),d=e.attr("data-show-response"),c="";if(e.attr("data-real-target")?c=$(e.attr("data-real-target")):e.attr("data-closest-target")&&(c=e.closest(e.attr("data-closest-target"))),!a)return console.log("Ajax Request: Set data-action-url!"),!1;n&&$(n).length&&$(n).remove(),i&&$(i).length&&$(i).fadeOut(function(){$(this).remove()}),e.each(function(){$.each(this.attributes,function(){var a;this.specified&&this.name.match("^data-post-")&&(a=this.name.replace("data-post-",""),t[a]=this.value)})}),"1"===s?e.addClass("spinning"):appLoader.show();a={url:a,data:t,cache:!1,type:"POST",success:function(a){"1"===s&&e.removeClass("spinning"),d&&a?a.success?(a.message&&appAlert.success(a.message,{duration:1e4}),l&&location.reload()):appAlert.error(a.message):l&&location.reload(),o&&$(o).length&&$(o).remove(),r&&$(r).length&&$(r).fadeOut(function(){$(this).remove()}),appLoader.hide(),c.length&&(e.attr("data-append")?(e.remove(),c.append(a)):c.html(a))},statusCode:{404:function(){appLoader.hide(),appAlert.error("404: Page not found.")}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.")}};d&&(a.dataType="json"),ajaxRequestXhr=$.ajax(a)}),$("body").on("click",'[data-bs-toggle="ajax-tab"] a',function(){var a=$(this),t=a.attr("href"),e=a.attr("data-bs-target");return e&&(a.attr("data-reload")&&$(e).html(""),""!==$(e).html()&&!a.attr("data-reload")||(appLoader.show({container:e,css:"right:50%; bottom:auto;"}),$.ajax({url:t,cache:!1,type:"GET",success:function(a){$(e).html(a),feather.replace(),selectLastlySelectedTab(e)},statusCode:{403:function(){console.log("403: Session expired."),location.reload()},404:function(){appLoader.hide(),appAlert.error("404: Page not found.")}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.")}})),a.tab("show")),!1}),selectLastlySelectedTab(),$("body").on("click",'[data-toggle="app-modal"]',function(){var a=!0;return"0"===$(this).attr("data-sidebar")&&(a=!1),appContentModal.init({url:$(this).attr("data-url"),sidebar:a}),!1});function t(a,t){var e=t.attr("data-success-callback");e&&void 0!==window[e]&&(window[e](a,t),a.message&&appAlert.warning(a.message,{duration:2e4}))}$("body").on("click","a[data-action=delete-confirmation]:not(table a)",function(a){deleteConfirmationHandler(a,t)});function e(a){var t,e=a.originalEvent.clipboardData.getData("text/plain");-1<e.indexOf("/#comment")&&(a.preventDefault(),e=(e=(e=(t=e.split("/"))[(a=t.length)-1])||t[--a-1]).split("-")[1],e="#["+t[a-2]+"-"+e+"] ("+AppLanugage.comment+") ",document.execCommand("insertText",!1,e))}$("body").on("paste","input, textarea",function(a){e(a)}),$("body").on("summernote.paste",function(a,t){e(t)})}),function(i){i.fn.appForm=function(a){var n=i.extend({},{ajaxSubmit:!0,isModal:!0,closeModalOnSuccess:!0,dataType:"json",showLoader:!0,onModalClose:function(){},onSuccess:function(){},onError:function(){return!0},onSubmit:function(){},onAjaxSuccess:function(){},beforeAjaxSubmit:function(a,t,e){}},a);function r(a){if(a){var t=AppHelper.settings.dateFormat||"Y.m.d",e=(t=t.toLowerCase()).charAt("1"),o=t.split(e),n=0,r=1,t=2;"y"===o[1]?n=1:"y"===o[2]&&(n=2),"m"===o[0]?r=0:"m"===o[2]&&(r=2),"d"===o[0]?t=0:"d"===o[1]&&(t=1);e=a.split(e);return e[n]+"-"+e[r]+"-"+e[t]}}function t(a,t){i.validator.addMethod("greaterThanOrEqual",function(a,t,e){var o=e;return!e||0!==e.indexOf("#")&&0!==e.indexOf(".")||(o=i(e).val()),void 0===i(t).attr("data-rule-required")&&!a||(/Invalid|NaN/.test(new Date(r(a)))?isNaN(a)&&isNaN(o)||Number(a)>=Number(o):!o||new Date(r(a))>=new Date(r(o)))},"Must be greater than {0}."),i.validator.addMethod("greaterThan",function(a,t,e){var o=e;return!e||0!==e.indexOf("#")&&0!==e.indexOf(".")||(o=i(e).val()),/Invalid|NaN/.test(new Number(a))?isNaN(a)&&isNaN(o)||Number(a)>Number(o):new Number(a)>new Number(o)},"Must be greater than."),i.validator.addMethod("mustBeSameYear",function(a,t,e){var o=e;if(!e||0!==e.indexOf("#")&&0!==e.indexOf(".")||(o=i(e).val()),!/Invalid|NaN/.test(new Date(r(a)))){a=new Date(r(a)),o=new Date(r(o));return a&&o&&a.getFullYear()===o.getFullYear()}},"The year must be same for both dates."),i(a).validate({submitHandler:function(a){if(!t)return!0;t(a)},highlight:function(a){i(a).closest(".form-group").addClass("has-error")},unhighlight:function(a){i(a).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",ignore:":hidden:not(.validate-hidden)",errorPlacement:function(a,t){t.parent(".input-group").length?a.insertAfter(t.parent()):a.insertAfter(t)}}),i(".validate-hidden").click(function(){i(this).closest(".form-group").removeClass("has-error").find(".help-block").hide()})}function e(a){a&&(i(".modal-mask").html("<div class='circle-done'><i data-feather='check' stroke-width='5'></i></div>"),setTimeout(function(){i(".modal-mask").find(".circle-done").addClass("ok")},30)),setTimeout(function(){i(".modal-mask").remove(),i("#ajaxModal").modal("toggle"),n.onModalClose()},1e3)}return this.each(function(){n.ajaxSubmit?t(i(this),function(o){n.onSubmit(),n.isModal?function(a){var t=a.height()-80;0<t&&(t=Math.floor(t/2)),a.after("<div class='modal-mask'><div class='circle-loader'></div></div>");var e=a.outerHeight();i(".modal-mask").css({width:a.width()+22+"px",height:e+"px","padding-top":t+"px"}),a.closest(".modal-dialog").find('[type="submit"]').attr("disabled","disabled"),a.addClass("hide")}(i("#ajaxModalContent").find(".modal-body")):i(o).find('[type="submit"]').attr("disabled","disabled"),"1"===AppHelper.settings.enableRichTextEditor&&i("textarea").each(function(){var a=i(this);a.attr("data-rich-text-editor")&&("<p><br></p>"===a.val()||""===a.val()?a.val(""):a.val(a.summernote("code")))}),i(o).ajaxSubmit({dataType:n.dataType,beforeSubmit:function(e,a,t){i.each(e,function(a,t){t.data&&t.data.convertDateFormat&&t.value&&(e[a].value=r(t.value))}),!n.isModal&&n.showLoader&&appLoader.show({container:o,css:"top:2%; right:46%;"}),n.beforeAjaxSubmit(e,a,t)},success:function(a){var t;n.onAjaxSuccess(a),a.success?(n.onSuccess(a),n.isModal&&n.closeModalOnSuccess&&e(!0),n.isModal||i(o).find("textarea").each(function(){i(this).attr("data-rich-text-editor")&&!i(this).attr("data-keep-rich-text-editor-after-submit")&&i(this).summernote("destroy")}),appLoader.hide()):n.onError(a)&&(n.isModal?((t=i(".modal-body").removeClass("hide")).closest(".modal-dialog").find('[type="submit"]').removeAttr("disabled"),t.removeClass("hide"),i(".modal-mask").remove(),a.message&&appAlert.error(a.message,{container:".modal-body",animate:!1})):a.message&&appAlert.error(a.message)),i(o).find('[type="submit"]').removeAttr("disabled")}})}):t(i(this))}),this.closeModal=function(){e(!0)},this}}(jQuery);var getWeekRange=function(a){a=a||moment().format("YYYY-MM-DD");var t=moment(a).format("E")-AppHelper.settings.firstDayOfWeek,e={};return e.firstDateOfWeek=(t<7?moment(a).subtract(t,"days"):moment(a)).format("YYYY-MM-DD"),t<0&&(e.firstDateOfWeek=moment(e.firstDateOfWeek).subtract(7,"days").format("YYYY-MM-DD")),e.lastDateOfWeek=moment(e.firstDateOfWeek).add(6,"days").format("YYYY-MM-DD"),e},prepareDefaultFilters=function(a){var t,e,o,n,r,i,s,l,d,c,p,u;return"daily"===(t=a).dateRangeType?(t.filterParams.start_date=moment().format(t._inputDateFormat),t.filterParams.end_date=t.filterParams.start_date):"monthly"===t.dateRangeType?(e=moment().daysInMonth(),o=moment().format("YYYY-MM"),t.filterParams.start_date=o+"-01",t.filterParams.end_date=o+"-"+e):"yearly"===t.dateRangeType?(n=moment().format("YYYY"),t.filterParams.start_date=n+"-01-01",t.filterParams.end_date=n+"-12-31"):"weekly"===t.dateRangeType&&(n=getWeekRange(),t.filterParams.start_date=n.firstDateOfWeek,t.filterParams.end_date=n.lastDateOfWeek),r=a=t,i=[],s="",$.each(r.checkBoxes,function(a,t){s=t.name,t.isChecked&&i.push(t.value)}),r.filterParams[s]=i,l=a=r,$.each(l.multiSelect,function(a,t){var e=t.saveSelection,o=getCookie(t.name),n=[];e&&o?(o=o.split("-"),n=o):$.each(t.options,function(a,t){t.isChecked&&n.push(t.value)}),l.filterParams[t.name]=n}),d=a=l,$.each(d.radioButtons,function(a,t){t.isChecked&&(d.filterParams[t.name]=t.value)}),c=a=d,$.each(c.filterDropdown||[],function(a,e){$.each(e.options,function(a,t){t.isSelected&&(c.filterParams[e.name]=t.id)})}),p=a=c,$.each(p.singleDatepicker||[],function(a,e){$.each(e.options||[],function(a,t){t.isSelected&&(p.filterParams[e.name]=t.value)})}),u=a=p,$.each(u.rangeDatepicker||[],function(a,t){t.startDate&&t.startDate.value&&(u.filterParams[t.startDate.name]=t.startDate.value),t.startDate&&t.endDate.value&&(u.filterParams[t.endDate.name]=t.endDate.value)}),a=u},buildFilterDom=function(p,u,m){function f(a,t){a&&(a.is("table")?a.appTable({reload:!0,filterParams:t.filterParams}):a.appFilters({reload:!0,filterParams:t.filterParams}))}var a,t;p.search&&!1!==p.search.show&&(a='<div class="DTTT_container"><input type="search" class="custom-filter-search" name="'+p.search.name+'" placeholder="'+p.customLanguage.searchPlaceholder+'"></div>',u.find(".custom-toolbar").append(a),u.find(".custom-filter-search").keyup(function(){appLoader.show();var a=$(this);clearTimeout(t),t=setTimeout(function(){p.filterParams[p.search.name]=a.val(),f(m,p)},700)}));var e=getRandomAlphabet(5);p.isMobile&&(u.find(".custom-toolbar").addClass("clearfix"),!p.dateRangeType&&void 0===p.checkBoxes[0]&&void 0===p.multiSelect[0]&&void 0===p.radioButtons[0]&&void 0===p.singleDatepicker[0]&&void 0===p.rangeDatepicker[0]&&void 0===p.filterDropdown[0]||(o="<div class='float-end'>                        <button title='"+AppLanugage.filters+"' class='dropdown-toggle btn btn-default mt0' data-bs-toggle='collapse' data-bs-target='#table-collapse-filter-"+e+"' aria-expanded='false'><i data-feather='sliders' class='icon-18'></i></button>                    </div>                    <div id='table-collapse-filter-"+e+"' class='navbar-collapse collapse w100p'></div>",u.find(".custom-toolbar").append(o))),p.reloadSelector&&$(p.reloadSelector).length&&$(p.reloadSelector).click(function(){appLoader.show(),f(m,p)});function h(a){(p.isMobile?u.find("#table-collapse-filter-"+e):u.find(".custom-toolbar")).append(a)}var r,o,n,i,s,l,d,c,v,g;p.dateRangeType&&(h('<div class="mr15 DTTT_container btn-group"><button data-act="prev" class="btn btn-default date-range-selector"><i data-feather="chevron-left" class="icon"></i></button><button data-act="datepicker" class="btn btn-default"></button><button data-act="next"  class="btn btn-default date-range-selector"><i data-feather="chevron-right" class="icon"></i></button></div>'),r=u.find("[data-act='datepicker']"),o=u.find(".date-range-selector"),"daily"===p.dateRangeType&&((n=function(a){p.filterParams.start_date===moment().format(p._inputDateFormat)?a.html(p.customLanguage.today):p.filterParams.start_date===moment().subtract(1,"days").format(p._inputDateFormat)?a.html(p.customLanguage.yesterday):p.filterParams.start_date===moment().add(1,"days").format(p._inputDateFormat)?a.html(p.customLanguage.tomorrow):a.html(moment(p.filterParams.start_date).format("Do MMMM YYYY"))})(r),r.datepicker({format:p._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom"}).on("changeDate",function(a){a=moment(a.date).format(p._inputDateFormat);p.filterParams.start_date=a,p.filterParams.end_date=a,n(r),f(m,p)}),o.click(function(){var a=$(this).attr("data-act"),t="";"next"===a?t=moment(p.filterParams.start_date).add(1,"days").format(p._inputDateFormat):"prev"===a&&(t=moment(p.filterParams.start_date).subtract(1,"days").format(p._inputDateFormat)),p.filterParams.start_date=t,p.filterParams.end_date=t,n(r),f(m,p)})),"monthly"===p.dateRangeType&&((i=function(a){a.html(moment(p.filterParams.start_date).format("MMMM YYYY"))})(r),r.datepicker({format:"YYYY-MM",viewMode:"months",minViewMode:"months",autoclose:!0,language:"custom"}).on("changeDate",function(a){var t=moment(a.date).format(p._inputDateFormat),a=moment(t).daysInMonth(),t=moment(t).format("YYYY-MM");p.filterParams.start_date=t+"-01",p.filterParams.end_date=t+"-"+a,i(r),f(m,p)}),o.click(function(){var a,t,e=$(this).attr("data-act"),o=moment(p.filterParams.start_date),n=moment(p.filterParams.end_date);"next"===e?(a=(t=o.add(1,"months")).daysInMonth(),o=(t=t.format("YYYY-MM"))+"-01",n=t+"-"+a):"prev"===e&&(a=(e=o.subtract(1,"months")).daysInMonth(),o=(t=e.format("YYYY-MM"))+"-01",n=t+"-"+a),p.filterParams.start_date=o,p.filterParams.end_date=n,i(r),f(m,p)})),"yearly"===p.dateRangeType&&((s=function(a){a.html(moment(p.filterParams.start_date).format("YYYY"))})(r),r.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom"}).on("changeDate",function(a){a=moment(a.date).format(p._inputDateFormat),a=moment(a).format("YYYY");p.filterParams.start_date=a+"-01-01",p.filterParams.end_date=a+"-12-31",s(r),f(m,p)}),o.click(function(){var a=$(this).attr("data-act"),t=moment(p.filterParams.start_date),e=moment(p.filterParams.end_date);"next"===a?(t=t.add(1,"years").format(p._inputDateFormat),e=e.add(1,"years").format(p._inputDateFormat)):"prev"===a&&(t=t.subtract(1,"years").format(p._inputDateFormat),e=e.subtract(1,"years").format(p._inputDateFormat)),p.filterParams.start_date=t,p.filterParams.end_date=e,s(r),f(m,p)})),"weekly"===p.dateRangeType&&((l=function(a){var t=moment(p.filterParams.start_date).format("Do MMM"),e=moment(p.filterParams.end_date).format("Do MMM, YYYY");r.datepicker({format:"YYYY-MM-DD",autoclose:!0,calendarWeeks:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek}),a.html(t+" - "+e)})(r),o.click(function(){var a=$(this).attr("data-act"),t=moment(p.filterParams.start_date),e=moment(p.filterParams.end_date);"next"===a?(t=t.add(7,"days").format(p._inputDateFormat),e=e.add(7,"days").format(p._inputDateFormat)):"prev"===a&&(t=t.subtract(7,"days").format(p._inputDateFormat),e=e.subtract(7,"days").format(p._inputDateFormat)),p.filterParams.start_date=t,p.filterParams.end_date=e,l(r),f(m,p)}),r.datepicker({format:p._inputDateFormat,autoclose:!0,calendarWeeks:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek}).on("show",function(){$(".datepicker").addClass("week-view"),$(".datepicker-days").find(".active").siblings(".day").addClass("active")}).on("changeDate",function(a){a=getWeekRange(a.date);p.filterParams.start_date=a.firstDateOfWeek,p.filterParams.end_date=a.lastDateOfWeek,l(r),f(m,p)}))),void 0!==p.checkBoxes[0]&&(c=[],v=d="",$.each(p.checkBoxes,function(a,t){var e="",o="";v=t.name,t.isChecked&&(e=" checked",o=" active",c.push(t.value)),d+='<label class="btn btn-default mb0 '+o+'">',d+='<input type="checkbox" name="'+t.name+'" value="'+t.value+'" autocomplete="off" '+e+">"+t.text,d+="</label>"}),p.filterParams[v]=c,h('<div class="mr15 DTTT_container"><div class="btn-group filter" data-act="checkbox" data-toggle="buttons">'+d+"</div></div>"),u.find("[data-act='checkbox']").click(function(){var e=$(this);setTimeout(function(){var a=[],t="";e.parent().find("input:checkbox").each(function(){t=$(this).attr("name"),$(this).is(":checked")?(a.push($(this).val()),$(this).closest("label").addClass("active")):$(this).closest("label").removeClass("active")}),p.filterParams[t]=a,f(m,p)})})),void 0!==p.multiSelect[0]&&$.each(p.multiSelect,function(a,o){var n="",r=[],i=o.saveSelection,s=(s=getCookie(o.name))&&s.split("-");$.each(o.options,function(a,t){var e="";(i&&s&&-1<s.indexOf(t.value)||i&&!s&&t.isChecked||!i&&t.isChecked)&&(e=" active",r.push(t.value)),n+='<li class="list-group-item clickable '+e+'" data-name="'+o.name+'" data-value="'+t.value+'">',n+=t.text,n+="</li>"}),n="<div class='dropdown-menu'><ul class='list-group' data-act='multiselect'>"+n+"</ul></div>",p.filterParams[o.name]=r;var t='<div class="mr15 DTTT_container"><span class="dropdown inline-block filter-multi-select"><button class="btn btn-default dropdown-toggle caret " type="button" data-bs-toggle="dropdown" aria-expanded="true">'+o.text+" </button>"+n+"</span></div>";h(t),u.find("[data-name='"+o.name+"']").click(function(){var e=$(this);return e.toggleClass("active"),setTimeout(function(){var a=[],t="";e.parent().find("li").each(function(){t=$(this).attr("data-name"),$(this).hasClass("active")&&a.push($(this).attr("data-value"))}),i&&(s=a.join("-"),setCookie(o.name,s)),p.filterParams[t]=a,f(m,p)}),!1})}),void 0!==p.radioButtons[0]&&(g="",$.each(p.radioButtons,function(a,t){var e="",o="";t.isChecked&&(e=" checked",o=" active",p.filterParams[t.name]=t.value),g+='<label class="btn btn-default mb0 '+o+'">',g+='<input type="radio" name="'+t.name+'" value="'+t.value+'" autocomplete="off" '+e+">"+t.text,g+="</label>"}),h('<div class="mr15 DTTT_container"><div class="btn-group filter" data-act="radio" data-toggle="buttons">'+g+"</div></div>"),u.find("[data-act='radio'] input[type=radio]").click(function(){var a=$(this);setTimeout(function(){a.closest("[data-act='radio']").find("input:radio").each(function(){$(this).closest("label").removeClass("active"),$(this).is(":checked")&&(p.filterParams[$(this).attr("name")]=$(this).val(),$(this).closest("label").addClass("active"))}),f(m,p)})})),void 0!==p.singleDatepicker[0]&&$.each(p.singleDatepicker,function(a,t){var o=" ",n="",r="";t.options||(t.options=[]),t.options.push({value:"show-date-picker",text:AppLanugage.custom}),$.each(t.options,function(a,t){var e="";t.isSelected&&(e="active",n=t.value,r=t.text),o+='<div class="list-group-item '+e+'" data-value="'+t.value+'">'+t.text+"</div>"}),r||(r="- "+t.defaultText+" -",o='<div class="list-group-item active" data-value="">'+r+"</div>"+o),t.name&&(p.filterParams[t.name]=n);function e(a){p.filterParams[t.name]=a,f(m,p)}function i(a){return a+"<span class='ml10 dropdown-toggle'></span>"}var s='<div class="datepicker-custom-list list-group mb0">'+o+"</div>",l='<div class="mr15 DTTT_container"><button name="'+t.name+'" class="btn datepicker-custom-selector">'+i(r)+"</button></div>";h(l);var d=u.find("[name='"+t.name+"']"),c=void 0!==t.options[1];d.datepicker({format:p._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom"}).on("show",function(){c&&($(".datepicker-days, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),$(".datepicker-custom-list").show(),$(".datepicker-custom-list").length||($(".datepicker").append(s),$(".datepicker .list-group-item").click(function(){$(".datepicker .list-group-item").removeClass("active"),$(this).addClass("active");var a=$(this).attr("data-value");"show-date-picker"===a?($(".datepicker-custom-list, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),$(".datepicker-days, .table-condensed").show()):($(".datepicker").hide(),moment(a,p._inputDateFormat).isValid()&&(a=moment(a,p._inputDateFormat).format(p._inputDateFormat)),d.html(i($(this).html())),e(a))})))}).on("changeDate",function(a){d.html(i(moment(a.date,p._inputDateFormat).format("Do MMMM YYYY"))),e(moment(a.date,p._inputDateFormat).format(p._inputDateFormat))})}),void 0!==p.rangeDatepicker[0]&&$.each(p.rangeDatepicker,function(a,t){var e=t.startDate||{},o=t.endDate||{},n=!!t.showClearButton,r='<i data-feather="calendar" class="icon-16"></i>',i=e.value?moment(e.value,p._inputDateFormat).format("Do MMMM YYYY"):r,t=o.value?moment(o.value,p._inputDateFormat).format("Do MMMM YYYY"):r;p.filterParams[e.name]=e.value,p.filterParams[o.name]=o.value;function s(a,t){p.filterParams[a]=t,f(m,p)}h('<div class="mr15 DTTT_container mb10"><div class="input-daterange input-group"><button class="btn btn-default form-control" name="'+e.name+'" data-date="'+e.value+'">'+i+'</button><span class="input-group-addon">-</span><button class="btn btn-default form-control" name="'+o.name+'" data-date="'+o.value+'">'+t+"</div></div>");var t=u.find(".input-daterange"),l=t.find("button").toArray();t.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom",inputs:l}).on("changeDate",function(a){var t=moment(a.date,p._inputDateFormat).format(p._inputDateFormat);p.filterParams[e.name]||(p.filterParams[e.name]=t),p.filterParams[o.name]||(p.filterParams[o.name]=t),s($(a.target).attr("name"),t),$(l[0]).html(moment(p.filterParams[e.name],p._inputDateFormat).format("Do MMMM YYYY")),$(l[1]).html(moment(p.filterParams[o.name],p._inputDateFormat).format("Do MMMM YYYY"))}).on("show",function(){n&&($(".datepicker-clear-selection").show(),$(".datepicker-clear-selection").length||($(".datepicker").append("<div class='datepicker-clear-selection p5 clickable text-center'>"+AppLanugage.clear+"</div>"),$(".datepicker .datepicker-clear-selection").click(function(){p.filterParams[e.name]="",s(o.name,""),$(l[0]).html(r),$(l[1]).html(r),$(".datepicker").hide()})))})}),void 0!==p.filterDropdown[0]&&(g="",$.each(p.filterDropdown,function(a,o){var n="",r="",i=[];$.each(o.options,function(a,t){var e="";t.isSelected&&(e="selected",r=t.id),o.showHtml?i.push({id:t.id,text:t.text}):n+="<option "+e+' value="'+t.id+'">'+t.text+"</option>"}),o.name&&(p.filterParams[o.name]=r);var t='<select class="'+o.class+'" name="'+o.name+'">'+n+"</select>";o.showHtml&&(t='<input class="'+o.class+'" name="'+o.name+'" />'),h('<div class="mr15 DTTT_container">'+t+"</div>");t=u.find("[name='"+o.name+"']");void 0!==window.Select2&&(o.showHtml?t.select2({data:i,escapeMarkup:function(a){return a}}):t.select2()),t.change(function(){var a=$(this),t=a.attr("name"),a=a.val();p.filterParams[t]=a,o.dependent&&o.dependent.length&&b(t,a,p.filterDropdown,u,p.filterParams),f(m,p)})}));var b=function(o,r,a,i,s){$.each(a,function(a,t){var n,e;t.dependency&&t.dependency.length&&-1!==t.dependency.indexOf(o)&&(n=i.find("select[name="+t.name+"]"),(t.selfDependency&&!r||r)&&t.dataSource?$.ajax({url:t.dataSource,data:s,type:"POST",dataType:"json",success:function(a){var e,o;a&&a.length&&(o=e="",$.each(a,function(a,t){a||(o=t.id),e+="<option value='"+t.id+"'>"+t.text+"</option>"}),n.html(e),n.select2("val",o))}}):(e=n.find("option:first"),n.html("<option value='"+e.val()+"'>"+e.html()+"</option>"),n.select2("val",e.val())),e=n.find("option:first"),s[t.name]=e.val())})}};"undefined"!=typeof TableTools&&(TableTools.DEFAULTS.sSwfPath=AppHelper.assetsDirectory+"js/datatable/TableTools/swf/copy_csv_xls_pdf.swf");var $appFilterXhrRequest="new";function encodeAjaxPostData(a){return a=replaceAll("=","~",a),a=replaceAll("&","^",a)}function replaceAll(a,t,e){return e.replace(new RegExp(a,"g"),t)}!function(u){u.fn.appTable=function(a){var t=+AppHelper.settings.displayLength;!isNaN(t)&&t||(t=10);var e=!1;"1"===AppHelper.settings.disableResponsiveDataTable?e=!1:"1"!==AppHelper.settings.disableResponsiveDataTableForMobile&&window.outerWidth<800&&(e=!0);var e={serverSide:!1,source:"",xlsColumns:[],pdfColumns:[],printColumns:[],columns:[],order:[[0,"asc"]],hideTools:!1,displayLength:t,dateRangeType:"",checkBoxes:[],multiSelect:[],radioButtons:[],filterDropdown:[],singleDatepicker:[],rangeDatepicker:[],stateSave:!0,isMobile:window.outerWidth<800,responsive:e,stateDuration:5184e3,columnShowHideOption:!0,tableRefreshButton:!1,filterParams:{datatable:!0},onDeleteSuccess:function(){},onUndoSuccess:function(){},onInitComplete:function(){},customLanguage:{noRecordFoundText:AppLanugage.noRecordFound,searchPlaceholder:AppLanugage.search,printButtonText:AppLanugage.print,excelButtonText:AppLanugage.excel,printButtonToolTip:AppLanugage.printButtonTooltip,today:AppLanugage.today,yesterday:AppLanugage.yesterday,tomorrow:AppLanugage.tomorrow},footerCallback:function(a,t,e,o,n){},rowCallback:function(a,t,e,o){},summation:"",onRelaodCallback:function(){}},s=u(this);if(!s.is("table"))return console.log("appTable: Element must have to be a table",this),!1;s.on("length.dt page.dt order.dt search.dt",function(){setTimeout(function(){feather.replace()},1)});var c=u.extend({},e,a);if(c.reload){var p=u(this).dataTable(),a=(a=window.InstanceCollection[u(this).attr("id")])||c,n=p.get(0).id;return a.serverSide?window.appTables[n]._fnReDraw():p.fnReloadAjax(a.filterParams),u(this).data("onRelaodCallback")&&u(this).data("onRelaodCallback")(p,a.filterParams),!1}if(c.newData){p=u(this).dataTable();return c.dataId?((o=u(this).find("[data-post-id='"+c.dataId+"']")).length||(o=u(this).find("[data-index-id='"+c.dataId+"']")),o.length?(p.api().row(p.api().row(o.closest("tr")).index()).data(c.newData),p.fnUpdateRow(null,p.api().page())):p.fnUpdateRow(c.newData)):c.rowDeleted?p.fnUpdateRow(c.newData,p.api().page(),!0):p.fnUpdateRow(c.newData),!1}c.responsive&&s.addClass("nowrap");var o=function(n,r,i){var s="";return s+="<tr "+("all"===r?'data-section="all_pages"':"")+">",u.each(n.columns,function(e,a){var o="class = 'tf-blank' ",t=" ";n.summation[0]&&n.summation[0].column-1===e&&(t=i,o="class = 'tf-lable' "),u.each(n.summation,function(a,t){t.column===e&&(o="class = 'tf-result text-right' ",o+="data-"+r+'-page="'+t.column+'"')}),s+="<th "+o+">",s+=t,s+="</th>"}),s+="</tr>"};c.summation&&c.summation.length&&!c.isMobile&&(r="<tfoot>",r+=o(c,"current",AppLanugage.total),r+=o(c,"all",AppLanugage.totalOfAllPages),r+="</tfoot>",s.html(r)),c._visible_columns=[],u.each(c.columns,function(a,t){!1!==t.visible&&c._visible_columns.push(a);var e=!1;(!c.serverSide||t.order_by||!t.order_by&&t.iDataSort&&c.columns[t.iDataSort].order_by)&&(e=!0),c.columns[a].orderable=e}),c._exportable=c.xlsColumns.length+c.pdfColumns.length+c.printColumns.length,c._firstDayOfWeek=AppHelper.settings.firstDayOfWeek||0,c._inputDateFormat="YYYY-MM-DD";var r,o={ajax:{url:(c=prepareDefaultFilters(c)).source,type:"POST",data:function(a){var t=a.order&&a.order[0]?a.order[0].column:"",e=a.order&&a.order[0]?a.order[0].dir:"",o=a.search?a.search.value:"",e=e&&e.toUpperCase(),n=0;return c.serverSide&&(n=1),u.extend({order_by:c.columns[t]?c.columns[t].order_by:"",order_dir:e,search_by:o,skip:a.start,limit:a.length,draw:a.draw,server_side:n},c.filterParams)}},sServerMethod:"POST",columns:c.columns,bProcessing:!0,serverSide:c.serverSide,iDisplayLength:c.displayLength,aLengthMenu:[[10,25,50,100,-1],[10,25,50,100,AppLanugage.all]],bAutoWidth:!1,bSortClasses:!1,order:c.order,stateSave:c.stateSave,responsive:c.responsive,fnStateLoadParams:function(a,t){t&&t.search&&(t.search.search="")},stateDuration:c.stateDuration,fnInitComplete:function(){c.onInitComplete(this)},language:{lengthMenu:"_MENU_",zeroRecords:c.customLanguage.noRecordFoundText,info:"_START_-_END_ / _TOTAL_",sInfo:"_START_-_END_ / _TOTAL_",infoFiltered:"(_MAX_)",search:"",searchPlaceholder:c.customLanguage.searchPlaceholder,sInfoEmpty:"0-0 / 0",sInfoFiltered:"(_MAX_)",sInfoPostFix:"",sInfoThousands:",",sProcessing:"<div class='table-loader'><span class='loading'></span></div>",oPaginate:{sPrevious:"<i data-feather='chevrons-left' class='icon-16'></i>",sNext:"<i data-feather='chevrons-right' class='icon-16'></i>"}},sDom:"",footerCallback:function(a,t,e,o,n){var r=this;if(c.summation){var i=r.api().page.info(),s="",l="",d="";if(!i.recordsTotal)return u(r).find("tfoot").hide(),!1;u(r).find("tfoot").show(),u.each(c.summation,function(a,t){var e=calculateDatatableTotal(r,t.column,function(a){return a&&!a.startsWith("<b>")?"currency"===t.dataType?unformatCurrency(a,t.conversionRate):"time"===t.dataType?moment.duration(a).asSeconds():"number"===t.dataType?unformatCurrency(a):a:0},!0);"currency"===t.dataType?e=toCurrency(e,t.currencySymbol):"time"===t.dataType?e=secondsToTimeFormat(e):"number"===t.dataType&&(e=toCurrency(e,"none"));var o=p.column(t.column).header();o&&(l+="<div class='box'><div class='box-content'>"+u(o).html()+"</div><div class='box-content text-right'>"+e+"</div></div>"),u(r).find("[data-current-page="+t.column+"]").html(e),1<i.pages?(u(r).find("[data-section='all_pages']").show(),o=calculateDatatableTotal(r,t.column,function(a){return a&&!a.startsWith("<b>")?"currency"===t.dataType?unformatCurrency(a,t.conversionRate):"time"===t.dataType?moment.duration(a).asSeconds():"number"===t.dataType?unformatCurrency(a):a:0}),"currency"===t.dataType?o=toCurrency(o,t.currencySymbol):"time"===t.dataType?o=secondsToTimeFormat(o):"number"===t.dataType&&(o=toCurrency(o,"none")),(e=p.column(t.column).header())&&(d+="<div class='box'><div class='box-content'>"+u(e).html()+"</div><div class='box-content text-right'>"+o+"</div></div>"),u(r).find("[data-all-page="+t.column+"]").html(o)):u(r).find("[data-section='all_pages']").hide()}),c.isMobile&&(l&&(s+="<div class='box'><div class='box-content strong'>"+AppLanugage.total+"</div></div>"+l),d&&(s+="<div class='box'><div class='box-content strong'>"+AppLanugage.totalOfAllPages+"</div></div>"+d),u(".summation-section").html(s))}c.footerCallback(a,t,e,o,n,r)},fnRowCallback:function(a,t,e,o){c.rowCallback(a,t,e,o)}};AppHelper.userId&&(o.stateSaveParams=function(a,t){-1===a.sInstance.indexOf("-user-ref-")&&(a.sInstance+="-user-ref-"+AppHelper.userId)},o.stateLoadCallback=function(a){-1===a.sInstance.indexOf("-user-ref-")&&(a.sInstance+="-user-ref-"+AppHelper.userId);try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(a){}}),c.hideTools||(o.sDom="<'datatable-tools row'<'col-md-2 toolbar-left-top pl15'l><'col-md-10 custom-toolbar pr15'f>r>t<'datatable-tools clearfix row'<'col-md-3 pl15'i><'col-md-9 pr15'p>>"),c._exportable&&(r=[],c.xlsColumns.length&&r.push({extend:"excelHtml5",footer:!0,text:c.customLanguage.excelButtonText,exportOptions:{columns:c.xlsColumns},customize:function(a){var t,e,o,n;s.find("[data-section='all_pages']")&&"none"!==s.find("[data-section='all_pages']").css("display")&&(t=a.xl.worksheets["sheet1.xml"],a=u(t.childNodes[0].childNodes[1]),e=parseInt(a.find("row:last-child").attr("r"))+1,o=0,n='<row r="'+e+'">',s.find("[data-section='all_pages'] th").each(function(){u(this).text()&&(n+='<c t="inlineStr" r="'+"abcdefghijklmnopqrstuvwxyz"[o].toUpperCase()+e+'" s="2">',n+="<is>",n+="<t>"+u(this).text()+"</t>",n+="</is>",n+="</c>"),o+=1}),n+="</row>",t.childNodes[0].childNodes[1].innerHTML=t.childNodes[0].childNodes[1].innerHTML+n)}}),c.pdfColumns.length&&r.push({extend:"pdfHtml5",exportOptions:{columns:":visible:not(.option)"}}),c.printColumns.length&&r.push({extend:"print",autoPrint:!1,text:c.customLanguage.printButtonText,footer:!0,exportOptions:{columns:c.printColumns},customize:function(a){var t;u(a.document.body).closest("html").addClass("dt-print-view"),s.find("[data-section='all_pages']")&&"none"!==s.find("[data-section='all_pages']").css("display")&&(t=s.find("[data-section='all_pages']").clone(),u(a.document.body).find("tfoot").append(t))},customizeData:function(a,t,e){}}),c.hideTools||(o.sDom="<'datatable-tools'<'w140 float-start toolbar-left-top pl15'l><'w-filter-right float-end custom-toolbar pr15'f<'datatable-export DTTT_container'B>>r>t<'datatable-tools clearfix row'<'col-md-3 pl15'<'summation-section'> i><'col-md-9 pr15'p>>"),o.buttons=r),o.drawCallback=function(){c.serverSide&&s.closest(".dataTables_wrapper").find("input[type=search]").val(c.filterParams&&c.filterParams.search_by?c.filterParams.search_by:"")};var l=s.dataTable(o),o=s.closest(".dataTables_wrapper"),n=s.get(0)?s.get(0).id:"id_not_found";window.appTables||(window.appTables=[]),window.appTables[n]=l,o.find(".DTTT_button_print").tooltip({placement:"bottom",container:"body"}),o.find("select").select2({minimumResultsForSearch:-1}),c.columnShowHideOption&&(n=s.attr("id"),p=s.DataTable(),o.find(".toolbar-left-top").append('<div class="DTTT_container float-start"><button class="btn btn-default column-show-hide-popover ml15" data-container="body" data-bs-toggle="popover" data-placement="bottom"><i data-feather="eye-off" class="icon-16"></i></button></div>'),o.find(".column-show-hide-popover").popover({html:!0,sanitize:!1,content:function(){var o="";return u.each(c.columns,function(a,t){var e;!1!==t.visible&&(e="",p.column(a).visible()||(e="active"),o+="<li class='"+e+" list-group-item clickable toggle-table-column' data-column='"+a+"'>"+t.title+"</li>")}),"<ul class='list-group' data-table='"+n+"'>"+o+"</ul>"}}),o.find(".column-show-hide-popover").on("shown.bs.popover",function(){feather.replace(),u(".toggle-table-column").on("click",function(){var a=u(this).closest(".list-group").attr("data-table"),a=u("#"+a).DataTable().column(u(this).attr("data-column"));a&&(a.visible(!a.visible()),u(this).toggleClass("active"))})})),c.tableRefreshButton&&(o.find(".toolbar-left-top").append('<div class="DTTT_container float-start "><button class="btn btn-default at-table-refresh-button ml15"><i data-feather="refresh-cw" class="icon-16"></i></button></div>'),o.find(".at-table-refresh-button").on("click",function(){s.appTable({reload:!0,filterParams:c.filterParams})})),u("body").hasClass("destroy-popover")||(u("body").addClass("destroy-popover"),u(".destroy-popover").on("click",function(a){"popover"===u(a.target).closest("button").attr("data-bs-toggle")||u(a.target).closest(".popover").length||u(a.target).hasClass("editable")||(a=u(".popover.in").attr("id"),u("[aria-describedby="+a+"]").trigger("click"))})),s.data("onRelaodCallback",c.onRelaodCallback),c.serverSide?(o.find("input[type=search]").unbind().bind("input",delayAction(function(a){c.filterParams.search_by=u(this).val(),s.appTable({reload:!0,filterParams:c.filterParams})},1e3)),u("body").on("click","#"+s.get(0).id+" .badge.clickable",function(){return c.filterParams.search_by=u(this).text(),s.appTable({reload:!0,filterParams:c.filterParams}),!1}),u("body").on("click","#"+s.get(0).id+" .filter-sub-task-button",function(){return c.filterParams.search_by=u(this).attr("main-task-id"),s.appTable({reload:!0,filterParams:c.filterParams}),!1}),u("body").on("click","#"+s.get(0).id+" .remove-filter-button",function(){return c.filterParams.search_by="",s.appTable({reload:!0,filterParams:c.filterParams}),!1})):u("body").on("click","#"+s.get(0).id+" .badge.clickable",function(){var a=u(this).text();return u(this).closest(".dataTable").DataTable().search(a).draw(),u(this).closest(".dataTables_wrapper").find("input[type=search]").val(a).focus().select(),!1}),buildFilterDom(c,o,s);function i(a,t){var e=t.closest("tr"),o=s.DataTable(),n=t.attr("data-undo"),r=t.attr("data-action-url"),t=t.attr("data-id");l.fnDeleteRow(o.row(e).index(),function(){o.page(o.page()).draw("page")},!1);var i,e=appAlert.warning(a.message,{duration:2e4});c.onDeleteSuccess(a),"0"!==n&&(i={alertSelector:e,url:r,id:t},u('<a class="undo-delete" href="javascript:;"><strong>'+AppLanugage.undo+"</strong></a>").insertAfter(u(i.alertSelector).find(".app-alert-message")),u(i.alertSelector).find(".undo-delete").bind("click",function(){u(i.alertSelector).remove(),appLoader.show(),u.ajax({url:i.url,type:"POST",dataType:"json",data:{id:i.id,undo:!0},success:function(a){appLoader.hide(),a.success&&(s.appTable({newData:a.data,rowDeleted:!0}),c.onUndoSuccess(a))}})}))}window.InstanceCollection=window.InstanceCollection||{},window.InstanceCollection[u(this).attr("id")]=c,u("body").find(s).on("click","a[data-action=delete]",function(a){deleteHandler(a,i)}),u("body").find(s).on("click","a[data-action=delete-confirmation]",function(a){deleteConfirmationHandler(a,i)}),u("body").find(s).on("click","[data-action=update]",function(a){appLoader.show();var t=u(a.currentTarget);a.data&&a.data.target&&(t=a.data.target);t=t.attr("data-action-url");u.ajax({url:t,dataType:"json",success:function(a){a.success?(u(".dataTable:visible").appTable({newData:a.data,dataId:a.id}),appAlert.success(a.message,{duration:1e4})):appAlert.error(a.message),appLoader.hide()}})}),u.fn.dataTableExt.oApi.getSettings=function(a){return a},u.fn.dataTableExt.oApi.fnReloadAjax=function(e,a){this.fnClearTable(this),this.oApi._fnProcessingDisplay(e,!0);var o=this;console.log("fnReloadAjax loaded",new Date),"new"===$appFilterXhrRequest&&($appFilterXhrRequest=u.ajax({url:e.ajax.url,type:"POST",dataType:"json",data:a,success:function(a){$appFilterXhrRequest="new";for(var t=0;t<a.data.length;t++)o.oApi._fnAddData(e,a.data[t]);e.aiDisplay=e.aiDisplayMaster.slice(),o.fnDraw(o),o.oApi._fnProcessingDisplay(e,!1)}}))},u.fn.dataTableExt.oApi.fnUpdateRow=function(a,t,e,o){t&&this.oApi._fnAddData(a,t),o&&this.fnDraw(this),e?this.oApi._fnPageChange(a,e,!0):this.fnDraw(this)}}}(jQuery),deleteHandler=function(a,t){appLoader.show();var e=$(a.currentTarget);a.data&&a.data.target&&(e=a.data.target);var o=e.attr("data-action-url"),a=e.attr("data-id"),n=e.attr("data-reload-on-success");$.ajax({url:o,type:"POST",dataType:"json",data:{id:a},success:function(a){a.success?(t&&t(a,e),n&&location.reload()):appAlert.error(a.message),appLoader.hide()}})},deleteConfirmationHandler=function(a,t){var e=$("#confirmDeleteButton"),a=$(a.currentTarget);a.each(function(){$.each(this.attributes,function(){this.specified&&this.name.match("^data-")&&e.attr(this.name,this.value)})}),a.attr("data-undo","0"),e.unbind("click"),e.on("click",{target:a},function(a){deleteHandler(a,t)}),$("#confirmationModal").modal("show")},function(){var a;a=function(o){return t={info:function(a,t){return this._settings=e(t),this._settings.alertType="info",n(a),"#"+this._settings.alertId},success:function(a,t){return this._settings=e(t),this._settings.alertType="success",n(a),"#"+this._settings.alertId},warning:function(a,t){return this._settings=e(t),this._settings.alertType="warning",n(a),"#"+this._settings.alertId},error:function(a,t){return this._settings=e(t),this._settings.alertType="error",n(a),"#"+this._settings.alertId},options:{container:"body",duration:0,showProgressBar:!0,clearAll:!0,animate:!0}};function e(a){return(a=a||{}).alertId="app-alert-"+function(){for(var a="",t="abcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}(),this._settings=o.extend({},t.options,a)}function n(a){!function(){this._settings.clearAll&&o("[role='alert']").remove()}(),o(this._settings.container).length?(this._settings.animate&&setTimeout(function(){o(".app-alert").animate({opacity:1,right:"40px"},500,function(){o(".app-alert").animate({right:"15px"},300)})},20),o(this._settings.container).prepend(function(a){var t="info";return"error"===this._settings.alertType?t="danger":"success"===this._settings.alertType?t="success":"warning"===this._settings.alertType&&(t="warning"),this._settings.animate&&(t+=" animate"),'<div id="'+this._settings.alertId+'" class="app-alert alert alert-'+t+' alert-dismissible " role="alert"><button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button><div class="app-alert-message">'+a+'</div><div class="progress"><div class="progress-bar bg-'+t+' hide" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div></div>'}(a)),function(){var a,t,e;this._settings.duration&&this._settings.showProgressBar&&(a="#"+this._settings.alertId,(t=o(a).find(".progress-bar")).removeClass("hide").width(0),e="width "+this._settings.duration+"ms ease",t.css({WebkitTransition:e,MozTransition:e,MsTransition:e,OTransition:e,transition:e}),setTimeout(function(){0<o(a).length&&o(a).remove()},this._settings.duration))}()):console.log("appAlert: container must be an html selector!")}var t},window.appAlert=a(window.jQuery)}(),function(){var a;a=function(e){return o={show:function(a){var t=e("#app-loader");this._settings=function(a){a=a||{};return this._settings=e.extend({},o.options,a)}(a),t.length||((t=e(this._settings.container)).length?t.append('<div id="app-loader" class="app-loader" style="z-index:'+this._settings.zIndex+";"+this._settings.css+'"><div class="loading"></div></div>'):console.log("appLoader: container must be an html selector!"))},hide:function(){var a=e("#app-loader");a.length&&a.remove()},options:{container:"body",zIndex:"auto",css:""}};var o},window.appLoader=a(window.jQuery)}(),function(){var a;a=function(o){return i={init:function(a){this._settings=function(a){a=a||{};return this._settings=o.extend({},appLoader.options,a)}(a),function(a){var t="<div class='app-modal-sidebar hidden-xs'>                                        <div class='clearfix'>                                            <div class='app-modal-files-button float-start'>                                                <span class='app-modal-previous-button clickable'><i data-feather='chevron-left' class='icon-18'></i></span>                                                <span class='app-modal-next-button clickable'><i data-feather='chevron-right' class='icon-18'></i></span>                                            </div>                                            <div class='app-modal-close float-end'><span>&times;</span></div>                                        </div>                                        <div class='app-moadl-sidebar-scrollbar'>                                            <div class='app-modal-sidebar-area'>                                            </div>                                        </div>                                    </div>",e="<span class='expand hidden-xs'><i data-feather='maximize-2' class='icon-16'></i></span>";!1!==a.sidebar&&!isMobile()||(t="",e="<div class='app-modal-close app-modal-fixed-close-button'><span>&times;</span></div>"),t="<div class='app-modal loading'>                                <span class='compress'><i data-feather='minimize-2' class='icon-16'></i></span>                                <div class='app-modal-body'>                                    <div class='app-modal-content'>"+e+"<div class='hide app-modal-close'><span>&times;</span></div>                                        <div class='app-modal-content-area d-inline-block'>                                        </div>                        </div>"+t+"</div>                            </div>",r(),o("body").prepend(t),setTimeout(function(){var a=o(window).height()-60;o(".app-modal-content-area").prop("scrollHeight")>a&&o(".app-modal-content-area").css({"max-height":a+"px","overflow-y":"scroll",width:"100%"}),o.fn.mCustomScrollbar&&o(".app-moadl-sidebar-scrollbar").mCustomScrollbar({setHeight:a,theme:"minimal-dark",autoExpandScrollbar:!0})},200),o(".expand").click(function(){o(".app-modal").addClass("full-content")}),o(".compress").click(function(){o(".app-modal").removeClass("full-content")}),o(".app-modal-close").click(function(){r()}),o(".app-modal-previous-button").click(function(){showPreviousFile()}),o(".app-modal-next-button").click(function(){showNextFile()}),o(document).bind("keyup",n),appLoader.show({container:".app-modal",css:"top:35%; right:48%;"}),appModalXhr=o.ajax({url:a.url||"",data:{},cache:!1,type:"POST",success:function(a){a=o(a);o(".app-modal-content-area").html(a.find(".app-modal-content").html()),o(".app-modal-sidebar-area").html(a.find(".app-modal-sidebar").html()),a.remove(),o(".app-modal").removeClass("loading"),appLoader.hide()},statusCode:{404:function(){i.destroy(),appAlert.error("404: Page not found.")}},error:function(){i.destroy(),appAlert.error("500: Internal Server Error.")}})}(this._settings)},destroy:r,options:{url:"",css:"",sidebar:!0}};function n(a){27===a.keyCode&&r()}function r(){o(".app-modal").remove(),o(document).unbind("keyup",n),"undefined"!=typeof appModalXhr&&appModalXhr.abort()}var i},window.appContentModal=a(window.jQuery)}(),function(l){l.fn.appDateRange=function(a){var s=l.extend({},{dateRangeType:"yearly",filterParams:{},onChange:function(a){},onInit:function(a){}},a);s._inputDateFormat="YYYY-MM-DD",this.each(function(){var a=l(this);a.append('<div class="ml15"><button data-act="prev" class="btn btn-default date-range-selector"><i data-feather="chevron-left" class="icon-16"></i></button><button data-act="datepicker" class="btn btn-default" style="margin: -1px"></button><button data-act="next"  class="btn btn-default date-range-selector"><i data-feather="chevron-right" class="icon-16"></i></button></div>');var o,r,t,i=a.find("[data-act='datepicker']"),a=a.find(".date-range-selector");"yearly"===s.dateRangeType?((o=function(a){a.html(moment(s.filterParams.start_date).format("YYYY"))})(i),i.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom"}).on("changeDate",function(a){a=moment(a.date).format(s._inputDateFormat),a=moment(a).format("YYYY");s.filterParams.start_date=a+"-01-01",s.filterParams.end_date=a+"-12-31",s.filterParams.year=a,o(i),s.onChange(s.filterParams)}),t=moment().format("YYYY"),s.filterParams.start_date=t+"-01-01",s.filterParams.end_date=t+"-12-31",s.filterParams.year=t,s.onInit(s.filterParams),a.click(function(){var a=l(this).attr("data-act"),t=moment(s.filterParams.start_date),e=moment(s.filterParams.end_date);"next"===a?(t=t.add(1,"years").format(s._inputDateFormat),e=e.add(1,"years").format(s._inputDateFormat)):"prev"===a&&(t=t.subtract(1,"years").format(s._inputDateFormat),e=e.subtract(1,"years").format(s._inputDateFormat)),s.filterParams.start_date=t,s.filterParams.end_date=e,s.filterParams.year=moment(t).format("YYYY"),o(i),s.onChange(s.filterParams)})):"monthly"===s.dateRangeType&&((r=function(a){a.html(moment(s.filterParams.start_date).format("MMMM YYYY"))})(i),i.datepicker({format:"YYYY-MM",viewMode:"months",minViewMode:"months",autoclose:!0,language:"custom"}).on("changeDate",function(a){var t=moment(a.date).format(s._inputDateFormat),a=moment(t).daysInMonth(),t=moment(t).format("YYYY-MM");s.filterParams.start_date=t+"-01",s.filterParams.end_date=t+"-"+a,r(i),s.onChange(s.filterParams)}),t=moment().format("YYYY-MM"),s.filterParams.start_date=t+"-01",s.filterParams.end_date=t+"-31",s.filterParams.year=t,s.onInit(s.filterParams),a.click(function(){var a,t,e=l(this).attr("data-act"),o=moment(s.filterParams.start_date),n=moment(s.filterParams.end_date);"next"===e?(a=(t=o.add(1,"months")).daysInMonth(),o=(t=t.format("YYYY-MM"))+"-01",n=t+"-"+a):"prev"===e&&(a=(e=o.subtract(1,"months")).daysInMonth(),o=(t=e.format("YYYY-MM"))+"-01",n=t+"-"+a),s.filterParams.start_date=o,s.filterParams.end_date=n,s.filterParams.year=moment(o).format("YYYY-MM"),r(i),s.onChange(s.filterParams)}))})}}(jQuery);var loadFilterView=function(t){t.source&&t.targetSelector&&$.ajax({url:t.source,data:t.filterParams,cache:!1,type:"POST",success:function(a){$(t.targetSelector).html(a),appLoader.hide()},statusCode:{404:function(){appLoader.hide(),appAlert.error("404: Page not found.",{container:".modal-body",animate:!1})}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:!1})}})};!function(r){r.fn.appFilters=function(a){appLoader.show();var t={source:"",targetSelector:"",reloadSelector:"",dateRangeType:"",checkBoxes:[],multiSelect:[],radioButtons:[],filterDropdown:[],singleDatepicker:[],rangeDatepicker:[],isMobile:window.outerWidth<800,filterParams:{customFilter:!0},search:{show:!1},customLanguage:{searchPlaceholder:AppLanugage.search,today:AppLanugage.today,yesterday:AppLanugage.yesterday,tomorrow:AppLanugage.tomorrow},beforeRelaodCallback:function(){},afterRelaodCallback:function(){},onInitComplete:function(){}},e=r(this),o=e;o.append("<div class='custom-toolbar'></div>");var n=r.extend({},t,a);if(n.reload){t=r(this),a=window.InstanceCollection[t.attr("id")];return t.data("beforeRelaodCallback")&&t.data("beforeRelaodCallback")(t,a.filterParams),loadFilterView(a),t.data("afterRelaodCallback")&&t.data("afterRelaodCallback")(t,a.filterParams),!1}n._firstDayOfWeek=AppHelper.settings.firstDayOfWeek||0,n._inputDateFormat="YYYY-MM-DD",n=prepareDefaultFilters(n),buildFilterDom(n,o,e),window.InstanceCollection=window.InstanceCollection||{},(window.InstanceCollection[e.attr("id")]=n).onInitComplete&&n.onInitComplete(e,n.filterParams),loadFilterView(n),e.data("beforeRelaodCallback",n.beforeRelaodCallback),e.data("afterRelaodCallback",n.afterRelaodCallback)}}(jQuery),replaceAllString=function(a,t,e){return a.split(t).join(e)},toCurrency=function(a,t){a="0"==AppHelper.settings.noOfDecimals?Math.round(parseFloat(a))+".00":parseFloat(a).toFixed(2),t=t||AppHelper.settings.currencySymbol;a=a.replace(/(\d)(?=(\d{3})+\.)/g,"$1,");return" "===AppHelper.settings.thousandSeparator&&(a=a.replace(","," ")),","===AppHelper.settings.decimalSeparator&&(a=replaceAllString(a,".","_"),a=replaceAllString(a,",","."),a=replaceAllString(a,"_",",")),"none"===t&&(t=""),"0"==AppHelper.settings.noOfDecimals&&(a=a.slice(0,-3)),"right"===AppHelper.settings.currencyPosition?a+""+t:"0"==a.indexOf("-")?"-"+t+(a=a.replace("-","")):t+""+a},calculateDatatableTotal=function(a,t,n,e){e=e?{page:"current"}:{};return a.api().column(t,e).data().reduce(function(a,t,e,o){return n?a+n(t):a+t},0)},unformatCurrency=function(a,t){var e=a=a.toString(),o=!1;return a&&(a=a.replace(/[^0-9.,-]/g,""),!t||t[e=e.replace(a,"")]&&(a=unformatDecimalSeparator(a),a=(a=1/t[e]*1*a).toString(),o=!0),0!=a.indexOf(".")&&0!=a.indexOf(",")||(a=a.slice(1)),o||(a=unformatDecimalSeparator(a)),a=+a),a||0},unformatDecimalSeparator=function(a){return a=","===AppHelper.settings.decimalSeparator?(a=replaceAllString(a,".",""),replaceAllString(a,",",".")):replaceAllString(a,",","")},secondsToTimeFormat=function(a){var t=parseInt(a,10),e=Math.floor(t/3600),a=Math.floor((t-3600*e)/60),t=t-3600*e-60*a;return e<10&&(e="0"+e),a<10&&(a="0"+a),t<10&&(t="0"+t),e+":"+a+":"+t},clearAppTableState=function(a){a&&setTimeout(function(){a.api().state.clear()},200)},showHideAppTableColumn=function(a,t,e){a.fnSetColumnVis(t,!!e)},function(o){o.fn.appMention=function(a){var t=o.extend({},{at:"@",dataType:"json",source:"",data:{}},a),e=this;o.ajax({url:t.source,data:t.data,dataType:t.dataType,method:"POST",success:function(a){a.success&&o(e).atwho({at:t.at,data:a.data,insertTpl:"${content}"})}})}}(jQuery),function(e){e.fn.appMultiSelect=function(a){var r=e.extend({},{text:"",options:[],onChange:function(a){},onInit:function(a){}},a);this.each(function(){var a=e(this),o="",n=[];e.each(r.options,function(a,t){var e="";t.isChecked&&(e=" active",n.push(t.id)),o+='<li class="list-group-item clickable '+e+'" data-name="'+r.name+'" data-value="'+t.id+'">',o+=t.text,o+="</li>"}),o="<div class='dropdown-menu'><ul class='list-group' data-act='multiselect'>"+o+"</ul></div>";var t='<div class="mr15 DTTT_container custom-toolbar"><span class="dropdown inline-block filter-multi-select"><button class="btn btn-default dropdown-toggle caret " type="button" data-bs-toggle="dropdown" aria-expanded="true">'+r.text+" </button>"+o+"</span></div>";a.append(t),r.onInit(n),a.find("[data-name='"+r.name+"']").click(function(){var t=e(this);return t.toggleClass("active"),setTimeout(function(){var a=[];t.parent().find("li").each(function(){e(this).hasClass("active")&&a.push(e(this).attr("data-value"))}),r.onChange(a)}),!1})})}}(jQuery),function(c){c.fn.appModifier=function(a){var t=c.extend({},{actionUrl:"",value:"",actionType:"select2",showbuttons:!1,datepicker:{},select2Option:{},dataType:"json",onSuccess:function(){}},a),e=getRandomAlphabet(5),o="";t.showbuttons&&(o="<div class='custom-popover-button-area mt10 clearfix row'>\n                            <div id='custom-popover-submit-btn-"+e+"' class='col-md-6 pr5'><button class='btn btn-primary btn-sm w100p'><i data-feather='check' class='icon-16'></i></button></div>\n                            <div class='col-md-6 pl5 custom-popover-close-btn'><button class='btn btn-default btn-sm w100p'><i data-feather='x' class='icon-16'></i></button></div>\n                        </div>");var n="";"select2"===t.actionType?n="<input id='"+e+"' value='"+t.value+"' type='text' class='form-control popover-tempId' /> "+o:"date"===t.actionType&&(s=getJsDateFormat(),a=(i=t.value.split("-"))[0],o=i[1],i=i[2],n="<div style='height: 240px;' id='"+e+"'  data-date='"+s.replace("yyyy",a).replace("mm",o).replace("dd",i)+"' data-date-format='"+s+"' class='popover-tempId'></div>");var r=c(this),i=r.offset(),s=i.top,i=i.left,n="<div class='app-popover' style='top: "+(s+r.outerHeight()+10)+"px; left: "+i+"px'>\n                                <span class='app-popover-arrow' ></span>\n                                <div class='app-popover-body'>\n                                    <div class='loader-container inline-loader hide'></div>\n                                    "+n+" \n                                </div>\n                            </div>";c(".app-popover").remove(),c("body").append(n),feather.replace();var l=c("#"+e);function d(t,e,o,n){var a=l.closest(".app-popover-body").height(),r=l.closest(".app-popover-body").width();l.closest(".app-popover-body").find(".loader-container").removeClass("hide").css({height:a,width:r}),l.closest(".app-popover-body").find(".custom-popover-button-area").addClass("hide"),l.addClass("hide"),c.ajax({url:o.actionUrl,type:"POST",dataType:o.dataType,data:{value:e},success:function(a){c(".app-popover").remove(),setTimeout(function(){l.closest(".app-popover-body").find(".loader-container").addClass("hide"),l.closest(".app-popover-body").find(".custom-popover-button-area").removeClass("hide"),l.removeClass("hide")},200),a.success?(o.onSuccess(a),n&&t.text(n),t.attr("data-value",e),c(".app-popover").remove()):appAlert.error(a.message)}})}"select2"===t.actionType?t.showbuttons?c("#"+e).select2(t.select2Option):c("#"+e).select2(t.select2Option).change(function(a){d(r,c(this).val(),t,a.added.text)}):"date"===t.actionType&&(t.datepicker.onChangeDate=function(a){d(r,a,t)},setDatePicker("#"+e,t.datepicker)),c("body").find(".app-popover").each(function(){var a=c(window).width()-(c(this).offset().left+c(this).outerWidth());a<0&&(c(this).css({left:"unset",right:"10px"}),a=c(window).width()-(r.offset().left+r.outerWidth()/2*1),c(this).find(".app-popover-arrow").css({left:"unset",right:a}))}),c("div#custom-popover-submit-btn-"+e).click(function(){d(r,l.val(),t)}),c(".custom-popover-close-btn").click(function(){c(".app-popover").remove()})}}(jQuery),function(o){o.fn.appConfirmation=function(a){var t=o.extend({},{title:"",btnConfirmLabel:"",btnCancelLabel:"",onConfirm:function(){}},a),e=o(this).offset(),a=e.top,e=e.left,e="<div class='app-popover' style='bottom: "+(o(window).height()-(a-10))+"px; left: "+e+"px'>\n                                <span class='app-popover-arrow bottom-arrow' ></span>\n                                <div class='loader-container inline-loader hide'></div>\n                                <div class='app-popover-content-container'>\n                                    <div class='confirmation-title'>"+t.title+"</div>\n                                    <div class='app-popover-body pt0'>\n                                        <div class='custom-popover-button-area mt15 clearfix row'>\n                                            <div class='col-md-6 pr5'><button class='btn btn-danger btn-sm w100p confirmation-confirm-button'><i data-feather='check' class='icon-16'></i> "+t.btnConfirmLabel+"</button></div>\n                                            <div class='col-md-6 pl5'><button class='btn btn-default btn-sm w100p confirmation-cancel-button'><i data-feather='x' class='icon-16'></i> "+t.btnCancelLabel+"</button></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>";o(".app-popover").remove(),o("body").append(e),feather.replace(),o(".confirmation-confirm-button").click(function(){o(".app-popover").remove(),t.onConfirm()}),o(".confirmation-cancel-button").click(function(){o(".app-popover").remove()})}}(jQuery);